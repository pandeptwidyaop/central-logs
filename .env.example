# Central Logs Environment Variables
# Copy this file to .env and customize for your environment
# DO NOT commit .env file to version control!

# ============================================
# Server Configuration
# ============================================

# Server port (default: 3000)
SERVER_PORT=3000

# Environment: development, production (default: development)
SERVER_ENV=development

# ============================================
# Database Configuration
# ============================================

# SQLite database file path (default: ./data/central-logs.db)
DATABASE_PATH=./data/central-logs.db

# ============================================
# Redis Configuration
# ============================================

# Redis connection URL (default: redis://localhost:6379)
# Format: redis://[password@]host:port[/database]
REDIS_URL=redis://localhost:6379

# Examples:
# With password: redis://:mypassword@localhost:6379
# Different database: redis://localhost:6379/1
# Remote server: redis://redis.example.com:6379

# ============================================
# JWT Authentication
# ============================================

# JWT secret key - CHANGE THIS IN PRODUCTION!
# Generate with: openssl rand -base64 32
JWT_SECRET=change-this-secret-key-in-production

# JWT token expiry (default: 24h)
# Format: 1h, 24h, 168h (1 week), etc.
JWT_EXPIRY=24h

# ============================================
# Web Push Notifications (VAPID)
# ============================================

# Generate VAPID keys at: https://vapidkeys.com/
# Or use: npx web-push generate-vapid-keys

# VAPID public key (safe to expose to clients)
VAPID_PUBLIC_KEY=BCPvbPUl5BxOmMbJGV7Yorn_JB-EYfZM6JSn67Aum2-lGeRjtD5m2n0znCuf22K6MUCwZeGx_M29y5N07qq0Rdk

# VAPID private key - KEEP SECRET!
VAPID_PRIVATE_KEY=4dERHXcVs9WYkT8PtwFMid7mpMf_z1ejBQbnSAwfpdw

# VAPID subject (mailto: or https: URL)
VAPID_SUBJECT=mailto:admin@example.com

# ============================================
# Initial Admin User
# ============================================

# Admin username (default: admin)
ADMIN_USERNAME=admin

# Admin password - CHANGE THIS IN PRODUCTION!
# Generate strong password: openssl rand -base64 16
ADMIN_PASSWORD=changeme123

# ============================================
# Rate Limiting
# ============================================

# API requests per minute (default: 1000)
RATE_LIMIT_API_REQUESTS_PER_MINUTE=1000

# Telegram channel messages per minute (default: 20)
RATE_LIMIT_TELEGRAM_MESSAGES_PER_MINUTE=20

# Discord channel messages per minute (default: 30)
RATE_LIMIT_DISCORD_MESSAGES_PER_MINUTE=30

# Push notifications per minute (default: 60)
RATE_LIMIT_PUSH_MESSAGES_PER_MINUTE=60

# ============================================
# WebSocket Configuration
# ============================================

# Enable WebSocket (default: true)
WEBSOCKET_ENABLED=true

# Ping interval (default: 30s)
WEBSOCKET_PING_INTERVAL=30s

# Pong timeout (default: 10s)
WEBSOCKET_PONG_TIMEOUT=10s

# Max message size in bytes (default: 512)
WEBSOCKET_MAX_MESSAGE_SIZE=512

# Read buffer size (default: 1024)
WEBSOCKET_READ_BUFFER_SIZE=1024

# Write buffer size (default: 1024)
WEBSOCKET_WRITE_BUFFER_SIZE=1024

# ============================================
# Log Retention Policy
# ============================================

# Enable retention cleanup (default: true)
RETENTION_ENABLED=true

# Default retention max age (default: 30d)
# Format: 7d, 30d, 90d, 365d
RETENTION_DEFAULT_MAX_AGE=30d

# Default retention max count (default: 100000)
# Set to 0 for unlimited
RETENTION_DEFAULT_MAX_COUNT=100000

# Enable cleanup job (default: true)
RETENTION_CLEANUP_ENABLED=true

# Cleanup schedule in cron format (default: 0 2 * * *)
# Format: minute hour day month weekday
# Default runs at 2 AM daily
RETENTION_CLEANUP_SCHEDULE=0 2 * * *

# Cleanup batch size (default: 1000)
RETENTION_CLEANUP_BATCH_SIZE=1000

# ============================================
# Notes
# ============================================

# Alternative Format (Backward Compatible):
# You can also use CL_ prefix for any variable:
#   CL_SERVER_PORT=3000
#   CL_DATABASE_PATH=/data/db.sqlite
#
# Priority: Non-prefixed variables take precedence over CL_ prefixed ones.

# Security Tips:
# - Never commit .env file to git
# - Use strong passwords in production
# - Rotate JWT_SECRET periodically
# - Keep VAPID_PRIVATE_KEY secret
# - Use environment-specific .env files (.env.production, .env.staging)

# For more information:
# - See docs/ENVIRONMENT_VARIABLES.md
# - Run: go run cmd/envhelp/main.go
